<ion-card class="quiz-card">
  <ion-card-header>
    <ion-card-title>{{ title }}</ion-card-title>
    <ion-card-subtitle *ngIf="limit">Zufällig {{ limit }} Fragen</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    <div class="quiz-list">
      <div class="quiz-item" *ngFor="let q of active; let idx = index">
        <div class="quiz-head">
          <span class="pill">Frage {{ idx + 1 }}</span>
          <span class="pill light">{{ q.difficulty }}</span>
        </div>
        <p class="question">{{ q.question }}</p>
        <ion-list lines="none">
          <ion-item
            *ngFor="let c of q.choices"
            (click)="select(q, c.id)"
            [class.correct]="choiceState(q, c.id) === 'correct'"
            [class.wrong]="choiceState(q, c.id) === 'wrong'"
            button
          >
            <ion-label>{{ c.text }}</ion-label>
            <ion-icon
              *ngIf="choiceState(q, c.id) === 'correct'"
              slot="end"
              color="success"
              name="checkmark-circle-outline"
            ></ion-icon>
            <ion-icon
              *ngIf="choiceState(q, c.id) === 'wrong'"
              slot="end"
              color="danger"
              name="close-circle-outline"
            ></ion-icon>
          </ion-item>
        </ion-list>
        <p class="explain" *ngIf="answers[q.id]?.choice">
          {{ answers[q.id]?.correct ? 'Richtig:' : 'Hinweis:' }} {{ q.explain }}
        </p>
      </div>
    </div>
    <div class="quiz-actions">
      <ion-button size="small" fill="outline" color="medium" (click)="reset()">Neue Runde</ion-button>
      <ion-button size="small" fill="clear" (click)="toggleSolutions()">
        {{ showSolutions ? 'Lösungen ausblenden' : 'Lösungen zeigen' }}
      </ion-button>
    </div>
  </ion-card-content>
</ion-card>

